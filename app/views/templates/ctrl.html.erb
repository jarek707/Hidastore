class <%= uc_tab %>sController < ApplicationController
  # GET /<%= lc_tab %>s
  # GET /<%= lc_tab %>s.json
  def index
    @<%= lc_tab %>s = <%= uc_tab %>.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @<%= lc_tab %>s }
    end
  end

  # GET /<%= lc_tab %>s/1
  # GET /<%= lc_tab %>s/1.json
  def show
    @<%= lc_tab %> = <%= uc_tab %>.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @<%= lc_tab %> }
    end
  end

  # GET /<%= lc_tab %>s/new
  # GET /<%= lc_tab %>s/new.json
  def new
    @<%= lc_tab %> = <%= uc_tab %>.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @<%= lc_tab %> }
    end
  end

  # GET /<%= lc_tab %>s/1/edit
  def edit
    @<%= lc_tab %> = <%= uc_tab %>.find(params[:id])
  end

  # POST /<%= lc_tab %>s
  # POST /<%= lc_tab %>s.json
  def create
    @plug = Plug.find(params[:plug_id])
    @<%= lc_tab %> = @plug.<%= lc_tab %>s.create(params[:<%= lc_tab %>])
    @new_<%= lc_tab %> = <%= uc_tab %>.find(:all, :order => 'created_at DESC', :limit=>1).pop()
    respond_to do |format|
      format.json { render json: @new_<%= lc_tab %> }
    end
  end

  # PUT /<%= lc_tab %>s/1
  # PUT /<%= lc_tab %>s/1.json
  def update
    @<%= lc_tab %> = <%= uc_tab %>.find(params[:id])

    respond_to do |format|
      if @<%= lc_tab %>.update_attributes(params[:<%= lc_tab %>])
        logger.debug "PUTTING IN FIELD good"
        format.html { redirect_to @<%= lc_tab %>, notice: '<%= uc_tab %> was successfully updated.' }
        format.json { render json: params[:<%= lc_tab %>] }
      else
  logger.debug "PUTTING IN FIELD error"
        format.html { render action: "edit" }
        format.json { render json: @<%= lc_tab %>.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /<%= lc_tab %>s/1
  # DELETE /<%= lc_tab %>s/1.json
  def destroy
    @<%= lc_tab %> = <%= uc_tab %>.find(params[:id])
    @<%= lc_tab %>.destroy

    respond_to do |format|
      format.html { redirect_to <%= lc_tab %>s_url }
      format.json { render json: @<%= lc_tab %>.id }
    end
  end
end
